<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Daniel Nüst, Marc Schutzeichel, Markus Konkol">
  <link rel="canonical" href="https://o2r.info/api/user/user/">
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>User management - o2r web API</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  <link href="../../o2r.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "User management";
    var mkdocs_page_input_path = "user/user.md";
    var mkdocs_page_url = "/api/user/user/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> o2r web API</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Compendium management</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../compendium/overview/">Overview of the compendium life-cycle</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../compendium/upload/">API upload</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../compendium/public_share/">Public share submission</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../compendium/candidate/">Candidates</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../compendium/view/">View a compendium</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../compendium/delete/">Delete a compendium</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../compendium/download/">Download a compenium</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../compendium/metadata/">Compendium metadata</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../compendium/files/">Files in a compendium</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../job/">Compendium execution</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../shipment/">Shipments</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Extras</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../compendium/substitute/">Substitution</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../compendium/link/">Public links</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Users</span></p>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">User management</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#list-users">List users</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#error-responses-for-user-list">Error responses for user list</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#view-single-user">View single user</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#url-parameters-for-single-user-view">URL parameters for single user view</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#error-responses-for-single-user-view">Error responses for single user view</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#edit-user">Edit user</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#change-user-level-request">Change user level request</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#error-responses-for-user-level-change">Error responses for user level change</a>
    </li>
        </ul>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../levels/">User levels</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../auth/">Authentication (for developers)</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">o2r web API</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Users &raquo;</li>
        
      
    
    <li>User management</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/o2r-project/api/tree/master/docs/user/user.md"> Edit on github.com/o2r-project/api</a>
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="user-management">User management<a class="headerlink" href="#user-management" title="Permanent link">&para;</a></h1>
<h2 id="list-users">List users<a class="headerlink" href="#list-users" title="Permanent link">&para;</a></h2>
<p>Return a list of user ids. <a href="../../compendium/view/">Pagination (including defaults) as described for compendia</a> is available for users.</p>
<p><code>curl https://…/api/v1/user</code></p>
<p><code>GET /api/v1/user</code></p>
<pre><code class="language-json">200 OK

{
    &quot;results&quot;: [
        &quot;0000-0002-1825-0097&quot;,
        &quot;0000-0002-1825-0097&quot;
    ]
}
</code></pre>
<p>If there are no users, the returned list is empty:</p>
<pre><code class="language-json">200 OK
{
  &quot;results&quot;: [ ]
}
</code></pre>
<p>Pagination is supported using the query parameters <code>start</code> and <code>limit</code>.</p>
<ul>
<li><code>limit</code> is the number of results in the response, defaults to <code>10</code>. It numeric and larger than <code>0</code>.</li>
<li><code>start</code> is the index of the first list item in the response, defaults to <code>1</code>. It must be numeric and larger than <code>0</code>.</li>
</ul>
<p><code>GET /api/v1/user?start=5&amp;limit=10</code></p>
<h3 id="error-responses-for-user-list">Error responses for user list<a class="headerlink" href="#error-responses-for-user-list" title="Permanent link">&para;</a></h3>
<pre><code class="language-json">400 Bad Request

{&quot;error&quot;:&quot;limit must be larger than 0&quot;}
</code></pre>
<h2 id="view-single-user">View single user<a class="headerlink" href="#view-single-user" title="Permanent link">&para;</a></h2>
<p>Show the details of a user.</p>
<p><code>curl https://…/api/v1/user/$ID</code></p>
<p><code>GET /api/v1/user/:id</code></p>
<pre><code class="language-json">200 OK

{
    &quot;id&quot;: &quot;0000-0002-1825-0097&quot;,
    &quot;name&quot;: &quot;o2r&quot;
}
</code></pre>
<p>The content of the response depends on the state and level of the user that requests the resource. The above response only contains the id and the publicly visible name. The following response contains more details and requires a certain user level of the authenticated user making the request:</p>
<p><code>curl --cookie "connect.sid=&lt;session cookie here&gt;" https://…/api/v1/user/0000-0002-1825-0097</code></p>
<pre><code class="language-json">200 OK

{
    &quot;id&quot;: &quot;0000-0002-1825-0097&quot;,
    &quot;name&quot;: &quot;o2r&quot;,
    &quot;level&quot;: 0,
    &quot;lastseen&quot;: &quot;2016-08-15T12:32:23.972Z&quot;
}
</code></pre>
<h3 id="url-parameters-for-single-user-view">URL parameters for single user view<a class="headerlink" href="#url-parameters-for-single-user-view" title="Permanent link">&para;</a></h3>
<ul>
<li><code>:id</code> - the user id</li>
</ul>
<h3 id="error-responses-for-single-user-view">Error responses for single user view<a class="headerlink" href="#error-responses-for-single-user-view" title="Permanent link">&para;</a></h3>
<pre><code class="language-json">404 Not Found

{&quot;error&quot;:&quot;no user with this id&quot;}
</code></pre>
<h2 id="edit-user">Edit user<a class="headerlink" href="#edit-user" title="Permanent link">&para;</a></h2>
<p>You can update information of an existing user using the <code>HTTP</code> operation <code>PATCH</code>.</p>
<h3 id="change-user-level-request">Change user level request<a class="headerlink" href="#change-user-level-request" title="Permanent link">&para;</a></h3>
<p>The user level can be changed with an <code>HTTP</code> <code>PATCH</code> request.
The new level is passed to the API via a query parameter, i.e. <code>..?level=&lt;new level value&gt;</code>.
The value must be an <code>int</code> (integer).
The response is the full user document with the updated value.</p>
<div class="admonition note">
<p class="admonition-title">Required user level</p>
<p>The user sending the request to change the level must have the required <a href="../levels/">user level</a>.</p>
</div>
<pre><code class="language-bash">curl --request PATCH --cookie &quot;connect.sid=&lt;session cookie here&gt;&quot; \
  https://…/api/v1/user/0000-0002-1825-0097?level=42`
</code></pre>
<pre><code class="language-json">200 OK

{
    &quot;id&quot;: &quot;0000-0002-1825-0097&quot;,
    &quot;name&quot;: &quot;o2r&quot;,
    &quot;level&quot;: 42,
    &quot;lastseen&quot;: &quot;2016-08-15T12:32:23.972Z&quot;
}
</code></pre>
<h3 id="error-responses-for-user-level-change">Error responses for user level change<a class="headerlink" href="#error-responses-for-user-level-change" title="Permanent link">&para;</a></h3>
<pre><code class="language-json">401 Unauthorized

{
  &quot;error&quot;: &quot;user is not authenticated&quot;
}
</code></pre>
<pre><code class="language-json">403 Forbidden

{
  &quot;error&quot;: &quot;user level does not allow edit&quot;
}
</code></pre>
<pre><code class="language-json">400 Bad Request

{
  &quot;error&quot;: &quot;parameter 'level' could not be parsed as an integer&quot;
}
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../levels/" class="btn btn-neutral float-right" title="User levels">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../../compendium/link/" class="btn btn-neutral" title="Public links"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Licensed under Creative Commons CC0 1.0 Universal License.</p>
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../../compendium/link/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../levels/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
